{
  "openapi": "3.1.0",
  "info": {
    "title": "Presenton PPT Agent API",
    "description": "AI-powered presentation generator with natural language interface",
    "version": "1.0.0"
  },
  "servers": [
    {
      "url": "https://ppt.samsoncj.xyz",
      "description": "Production server via FRP"
    }
  ],
  "paths": {
    "/api/v1/ppt/agent/chat/stream": {
      "post": {
        "operationId": "streamChatWithAgent",
        "summary": "Stream chat with PPT Agent",
        "description": "Send a message to the PPT Agent and receive a streaming response. Perfect for creating, modifying, and managing presentations through natural language.",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "message": {
                    "type": "string",
                    "description": "User message in natural language",
                    "example": "创建一个关于人工智能发展史的10页演示文稿"
                  },
                  "session_id": {
                    "type": "string",
                    "description": "Unique session identifier for conversation context",
                    "example": "gpt_session_12345"
                  }
                },
                "required": ["message", "session_id"]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Streaming response with real-time updates",
            "content": {
              "text/plain": {
                "schema": {
                  "type": "string",
                  "description": "Server-sent events stream with progress updates and results"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/ppt/agent/chat/": {
      "post": {
        "operationId": "chatWithAgent",
        "summary": "Chat with PPT Agent",
        "description": "Send a message to the PPT Agent and get a complete response. Use this for quick interactions or when streaming is not needed.",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "message": {
                    "type": "string",
                    "description": "User message in natural language",
                    "example": "帮我修改第3页的标题"
                  },
                  "session_id": {
                    "type": "string", 
                    "description": "Unique session identifier for conversation context",
                    "example": "gpt_session_12345"
                  }
                },
                "required": ["message", "session_id"]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Agent response with intent analysis",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "response": {
                      "type": "string",
                      "description": "Agent's text response"
                    },
                    "intent": {
                      "type": "string",
                      "description": "Detected user intent"
                    },
                    "action_required": {
                      "type": "boolean",
                      "description": "Whether agent will perform an action"
                    },
                    "follow_up_question": {
                      "type": "string",
                      "description": "Follow-up question to gather more information"
                    },
                    "extracted_params": {
                      "type": "object",
                      "description": "Parameters extracted from user message"
                    },
                    "confidence": {
                      "type": "number",
                      "description": "Intent recognition confidence score"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/ppt/presentation/generate": {
      "post": {
        "operationId": "generatePresentation",
        "summary": "Generate complete presentation",
        "description": "Generate a complete PowerPoint presentation based on a topic and requirements",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "prompt": {
                    "type": "string",
                    "description": "Presentation topic or content description",
                    "example": "Introduction to Machine Learning"
                  },
                  "n_slides": {
                    "type": "integer",
                    "description": "Number of slides to generate (5-15)",
                    "minimum": 5,
                    "maximum": 15,
                    "default": 8
                  },
                  "language": {
                    "type": "string",
                    "description": "Presentation language",
                    "default": "Chinese",
                    "example": "Chinese"
                  },
                  "template": {
                    "type": "string",
                    "description": "Presentation template style",
                    "default": "general",
                    "enum": ["classic", "general", "modern", "professional"]
                  },
                  "export_as": {
                    "type": "string",
                    "description": "Export format",
                    "default": "pptx",
                    "enum": ["pptx", "pdf"]
                  }
                },
                "required": ["prompt"]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Generated presentation information",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "presentation_id": {
                      "type": "string",
                      "description": "Unique presentation ID"
                    },
                    "path": {
                      "type": "string",
                      "description": "File path to the generated presentation"
                    },
                    "edit_path": {
                      "type": "string",
                      "description": "URL path for editing the presentation"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/ppt/agent/memory/stats": {
      "get": {
        "operationId": "getMemoryStats",
        "summary": "Get memory system statistics",
        "description": "Get statistics about the conversation memory system including Redis status and session counts",
        "responses": {
          "200": {
            "description": "Memory system statistics",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "example": "success"
                    },
                    "stats": {
                      "type": "object",
                      "description": "Memory system statistics"
                    }
                  }
                }
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "schemas": {}
  }
}